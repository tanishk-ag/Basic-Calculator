<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic Calculator</title>
    <!doctype html>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjs@12.3.0/lib/browser/math.min.js"></script>

    <script>
        function addLog(msg) {
            var ul = document.getElementById("log");
            var li = document.createElement("li");
            var msg_text = document.createTextNode(msg);
            li.appendChild(msg_text);
            ul.appendChild(li);
        }

        function calculate() {
            expression = document.getElementById("expression").value;

            if (expression) {
                try {
                    answer = eval(expression);
                    console.log(expression + " = " + answer);
                    document.getElementById("expression").value = answer;
                    addLog(expression + " = " + answer);
                } catch (e) {
                    console.log("Bad Expression");
                    addLog(expression + " is BAD. Please fix it.");
                }
            }
        }

        function math_calculate() {
            expression = document.getElementById("expression").value;

            if (expression) {
                try {
                    answer = math.evaluate(expression);
                    console.log(expression + " = " + answer);
                    document.getElementById("expression").value = answer;
                    addLog(expression + " = " + answer);
                } catch (e) {
                    console.log("Bad Expression");
                    addLog(expression + " is BAD. Please fix it.");
                }
            }
        }

        function initialize_app() {
            cal_button = document.getElementById("=");
            cal_button.addEventListener("click", math_calculate);
        }

        function input_val(v) {
            expression = document.getElementById("expression").value;
            expression = expression + v;
            document.getElementById("expression").value = expression;
        }

        function back() {
            expression = document.getElementById("expression");
            expression.value = expression.value.slice(0,-1);
        }
        function clean() {
            expression = document.getElementById("expression");
            expression.value = '';
        }


    </script>
</head>

<body onload="initialize_app()">
    <div class="container mt-5">
        <div class="row justify-content-evenly mt-2">
            <div class="col">
            </div>
            <div class="col mx-auto">
                <input type="input" id="expression" placeholder="Type Expression here" class="form-control">
            </div>
            <div class="col">
            </div>
        </div>
        <div class="row justify-content-evenly mt-2">
            <div class="col">
            </div>
            <div class="col mx-auto">
                <button class="btn btn-secondary" onclick="input_val('7')">7 </button>
                <button class="btn btn-secondary" onclick="input_val('8')">8 </button>
                <button class="btn btn-secondary" onclick="input_val('9')">9 </button>
                <button class="btn btn-primary" onclick="input_val('/')">/ </button>
                <button class="btn btn-outline-danger" onclick="back()">← </button>
                <button class="btn btn-outline-danger" onclick="clean()">C </button>
            </div>
            <div class="col">
            </div>
        </div>
        <div class="row justify-content-evenly mt-2">
            <div class="col">
            </div>
            <div class="col mx-auto">
                <button class="btn btn-secondary" onclick="input_val('4')">4 </button>
                <button class="btn btn-secondary" onclick="input_val('5')">5 </button>
                <button class="btn btn-secondary" onclick="input_val('6')">6 </button>
                <button class="btn btn-primary" onclick="input_val('*')">* </button>
                <button class="btn btn-outline-secondary" onclick="input_val('(')">( </button>
                <button class="btn btn-outline-secondary" onclick="input_val(')')">) </button>
            </div>
            <div class="col">
            </div>
        </div>
        <div class="row justify-content-evenly mt-2">
            <div class="col">
            </div>
            <div class="col mx-auto">
                <button class="btn btn-secondary" onclick="input_val('1')">1 </button>
                <button class="btn btn-secondary" onclick="input_val('2')">2 </button>
                <button class="btn btn-secondary" onclick="input_val('3')">3 </button>
                <button class="btn btn-primary" onclick="input_val('-')">- </button>
                <button class="btn btn-outline-secondary" onclick="power()">^ </button>
                <button class="btn btn-outline-secondary" onclick="sqrt()">√ </button>
            </div>
            <div class="col">
            </div>
        </div>
        <div class="row justify-content-evenly mt-2">
            <div class="col">
            </div>
            <div class="col mx-auto">
                <button class="btn btn-secondary" onclick="input_val('0')">0 </button>
                <button class="btn btn-secondary" onclick="input_val('00')">00 </button>
                <button class="btn btn-secondary" onclick="input_val('.')">. </button>
                <button class="btn btn-primary" onclick="input_val('+')">+ </button>
                <button id="=" class="btn btn-success">= </button>
            </div>
            <div class="col">
            </div>
        </div>
        


        <div class="row justify-content-evenly mt-2">
            <div class="col">
            </div>
            <div class="col">

                <div id="log">
                    <h6>Log:</h6>

                </div>
            </div>
            <div class="col">
            </div>
        </div>
    </div>
</body>

</html>